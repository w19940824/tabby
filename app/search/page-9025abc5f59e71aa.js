(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2797,6044],{72845:function(e,t,n){Promise.resolve().then(n.bind(n,34809))},34809:function(e,t,n){"use strict";n.r(t),n.d(t,{SOURCE_CARD_STYLE:function(){return eT},Search:function(){return eL}});var r=n(36164),l=n(3546),s=n(70652),a=n.n(s),o=n(11978),i=n(54767),c=n(1853),d=n(82030),u=n(72940),m=n(52807),f=n(51722),h=n(19108),x=n(56575),v=n(2578),p=n(40055),g=n(21808),j=n(93877),b=n(43240),w=n(18500),N=n(28312),y=n(9010),I=n(24449),C=n(16784),S=n(98454),k=n(31159),R=n(4951),A=n(44645),M=n(80605),E=n(64566),_=n(47241),D=n(17451),T=n(37266),F=n(11634),z=n(70410),L=n(57288),U=n(31458),Z=n(81565),P=n(53538),V=n(57830),O=n(11208),q=n(29),G=n(72657),W=n(30601),Q=n(6230),K=n(69579),H=n(23057),$=n(84381),Y=n(62226),B=n.n(Y),J=n(6797),X=n.n(J),ee=n(94909),et=n(66686),en=n(5493),er=n(23455),el=n(23782),es=n(74038),ea=n(98150),eo=n(90615),ei=n(3448),ec=n(3236),ed=n(90168),eu=n(48537),em=n(54646),ef=n(64219),eh=n(89811),ex=n(52569);let ev=(0,l.createContext)({});function ep(e){var t,n,s,a,o,i;let{className:d,message:u,showRelatedQuestion:m,isLoading:f,isLastAssistantMessage:h,isDeletable:x,clientCode:v}=e,{onRegenerateResponse:p,onSubmitSearch:g,setDevPanelOpen:j,setConversationIdForDev:b,enableDeveloperMode:w,contextInfo:N,fetchingContextInfo:y,onDeleteMessage:I,isThreadOwner:C,onUpdateMessage:S,repositories:k}=(0,l.useContext)(ev),{supportsOnApplyInEditorV2:R}=(0,l.useContext)(ec.p),[A,M]=(0,l.useState)(!1),[E,_]=(0,l.useState)(!1),[D,T]=(0,l.useState)(void 0),F=f?Z.IconSpinner:Z.IconSparkles,z=(0,l.useMemo)(()=>{var e;if(!u.codeSourceId||!(null==k?void 0:k.length))return"";let t=k.find(e=>e.sourceId===u.codeSourceId);return null!==(e=null==t?void 0:t.gitUrl)&&void 0!==e?e:""},[u.codeSourceId,k]),P=(0,l.useMemo)(()=>{var e;return(null==v?void 0:v.length)&&null!==(e=v.map(e=>({kind:"file",range:(0,L.OV)(e),filepath:e.filepath||"",content:e.content,git_url:z})))&&void 0!==e?e:[]},[v,z]),V=(0,l.useMemo)(()=>{var e,t,n;return null!==(n=null==u?void 0:null===(t=u.attachment)||void 0===t?void 0:null===(e=t.code)||void 0===e?void 0:e.map(e=>{var t,n;return{kind:"file",range:(0,L.OV)(e),filepath:e.filepath,content:e.content,git_url:e.gitUrl,commit:null!==(n=e.commit)&&void 0!==n?n:void 0,extra:{scores:null==e?void 0:null===(t=e.extra)||void 0===t?void 0:t.scores}}}))&&void 0!==n?n:[]},[null==u?void 0:null===(t=u.attachment)||void 0===t?void 0:t.code]),O=(0,l.useMemo)(()=>null==v?void 0:v.map(e=>({...e,gitUrl:z})),[v,z]),q=null==u?void 0:null===(n=u.attachment)||void 0===n?void 0:n.doc,G=((null==O?void 0:O.length)||0)+((null===(a=u.attachment)||void 0===a?void 0:null===(s=a.code)||void 0===s?void 0:s.length)||0),W=(null==q?void 0:q.length)?Math.ceil(q.length/4)*eT.expand+.5*Math.floor(q.length/4)+.5:0,Q=e=>{let t=(0,L.OV)(e);if(!e.filepath)return;let n=new URL("".concat(window.location.origin,"/files")),r=new URLSearchParams;r.append("redirect_filepath",e.filepath),r.append("redirect_git_url",e.gitUrl),e.commit&&r.append("redirect_rev",e.commit),n.search=r.toString();let l=(0,L.nO)(t);l&&(n.hash=l),window.open(n.toString())},K=async e=>{let t=await S(e);if(t)return t;M(!1)};return(0,r.jsxs)("div",{className:(0,L.cn)("flex flex-col gap-y-5",d),children:[q&&q.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-1 flex items-center gap-x-2",children:[(0,r.jsx)(Z.IconBlocks,{className:"relative",style:{top:"-0.04rem"}}),(0,r.jsx)("p",{className:"text-sm font-bold leading-normal",children:"Sources"})]}),(0,r.jsx)("div",{className:"gap-sm -mx-2 grid grid-cols-3 gap-2 overflow-y-hidden px-2 pt-2 md:grid-cols-4",style:{transition:"height 0.25s ease-out",height:E?"".concat(W,"rem"):"".concat(eT.compress+.5,"rem")},children:q.map((e,t)=>(0,r.jsx)(eg,{conversationId:u.id,source:e,showMore:E,showDevTooltip:w},e.link+t))}),(0,r.jsxs)(U.z,{variant:"ghost",className:"-ml-1.5 mt-1 flex items-center gap-x-1 px-1 py-2 text-sm font-normal text-muted-foreground",onClick:()=>_(!E),children:[(0,r.jsx)(Z.IconChevronRight,{className:(0,L.cn)({"-rotate-90":E,"rotate-90":!E})}),(0,r.jsx)("p",{children:E?"Show less":"Show more"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-1 flex h-8 items-center gap-x-1.5",children:[(0,r.jsx)(F,{className:(0,L.cn)({"animate-spinner":f})}),(0,r.jsx)("p",{className:"text-sm font-bold leading-none",children:"Answer"}),w&&(0,r.jsx)(U.z,{variant:"ghost",size:"icon",onClick:()=>{b(u.id),j(!0)},children:(0,r.jsx)(Z.IconBug,{})})]}),G>0&&(0,r.jsx)(ed.q,{clientContexts:P,contexts:V,className:"mt-1 text-sm",onContextClick:e=>{if(!e.filepath)return;let t=(0,L.XX)(window.location.origin,e);window.open(t,"_blank")},enableTooltip:w,showExternalLink:!1,showClientCodeIcon:!0,onTooltipClick:()=>{b(u.id),j(!0)},highlightIndex:D}),f&&!u.content&&(0,r.jsx)(ei.O,{className:"mt-1 h-40 w-full"}),A?(0,r.jsx)(eb,{message:u,onCancel:()=>M(!1),onSubmit:K}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(em.J,{message:u.content,attachmentDocs:q,attachmentClientCode:O,attachmentCode:null===(o=u.attachment)||void 0===o?void 0:o.code,onCodeCitationClick:e=>{e.gitUrl&&Q(e)},onCodeCitationMouseEnter:e=>{var t,n;T(e-1-((null==u?void 0:null===(n=u.attachment)||void 0===n?void 0:null===(t=n.doc)||void 0===t?void 0:t.length)||0))},onCodeCitationMouseLeave:e=>{T(void 0)},contextInfo:N,fetchingContextInfo:y,canWrapLongLines:!f,supportsOnApplyInEditorV2:R}),u.error&&(0,r.jsx)(em.m,{error:u.error}),!f&&!A&&(0,r.jsxs)("div",{className:"mt-3 flex items-center justify-between text-sm",children:[(0,r.jsx)("div",{className:"flex items-center gap-x-3",children:C&&(0,r.jsxs)(r.Fragment,{children:[!f&&!y&&h&&(0,r.jsxs)(U.z,{className:"flex items-center gap-x-1 px-1 font-normal text-muted-foreground",variant:"ghost",onClick:()=>p(u.id),children:[(0,r.jsx)(Z.IconRefresh,{}),(0,r.jsx)("p",{children:"Regenerate"})]}),x&&(0,r.jsxs)(U.z,{className:"flex items-center gap-x-1 px-1 font-normal text-muted-foreground",variant:"ghost",onClick:()=>I(u.id),children:[(0,r.jsx)(Z.IconTrash,{}),(0,r.jsx)("p",{children:"Delete"})]})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-x-3",children:[(0,r.jsx)(eu.q,{className:"-ml-1.5 gap-x-1 px-1 font-normal text-muted-foreground",value:(e=>{var t,n,r,l,s,a,o,i,d,u,m;if((0,ee.Z)(null==e?void 0:null===(t=e.attachment)||void 0===t?void 0:t.doc)&&(0,ee.Z)(null==e?void 0:null===(n=e.attachment)||void 0===n?void 0:n.code))return e.content;let f=e.content.replace(es.H,e=>{let t=null==e?void 0:e.match(/\d+/);return"[".concat(t,"]")}).trim(),h=null!==(d=null===(l=e.attachment)||void 0===l?void 0:null===(r=l.doc)||void 0===r?void 0:r.map((e,t)=>"[".concat(t+1,"] ").concat(e.link)).join("\n"))&&void 0!==d?d:"",x=null!==(u=null===(a=e.attachment)||void 0===a?void 0:null===(s=a.doc)||void 0===s?void 0:s.length)&&void 0!==u?u:0,v=null!==(m=null===(i=e.attachment)||void 0===i?void 0:null===(o=i.code)||void 0===o?void 0:o.map((e,t)=>{let n=(0,L.tf)(e),r=(0,c.Z)([e.filepath,n]).join(":");return"[".concat(t+x+1,"] ").concat(r)}).join("\n"))&&void 0!==m?m:"";return"".concat(f,"\n\nCitations:\n").concat(h+v)})(u),text:"Copy"}),C&&(0,r.jsxs)(U.z,{className:"flex items-center gap-x-1 px-1 font-normal text-muted-foreground",variant:"ghost",onClick:e=>M(!0),children:[(0,r.jsx)(Z.IconEdit,{}),(0,r.jsx)("p",{children:"Edit"})]})]})]})]})]}),m&&!A&&!f&&u.threadRelevantQuestions&&u.threadRelevantQuestions.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-x-1.5",children:[(0,r.jsx)(Z.IconLayers,{}),(0,r.jsx)("p",{className:"text-sm font-bold leading-none",children:"Suggestions"})]}),(0,r.jsx)("div",{className:"mt-2 flex flex-col gap-y-3",children:null===(i=u.threadRelevantQuestions)||void 0===i?void 0:i.map((e,t)=>(0,r.jsxs)("div",{className:"flex cursor-pointer items-center justify-between rounded-lg border p-4 py-3 transition-opacity hover:opacity-70",onClick:g.bind(null,e),children:[(0,r.jsx)("p",{className:"w-full overflow-hidden text-ellipsis text-sm",children:e}),(0,r.jsx)(Z.IconPlus,{})]},t))})]})]})}function eg(e){var t,n;let{conversationId:s,source:a,showMore:o,showDevTooltip:i}=e,{setDevPanelOpen:c,setConversationIdForDev:d}=(0,l.useContext)(ev),[u,m]=(0,l.useState)(!1);return(0,r.jsxs)(eo.zs,{openDelay:100,closeDelay:100,children:[(0,r.jsxs)(q.u,{open:u,onOpenChange:e=>{i&&m(e)},delayDuration:0,children:[(0,r.jsx)(eo.Yi,{asChild:!0,children:(0,r.jsx)(q.aJ,{asChild:!0,children:(0,r.jsx)("div",{className:"relative flex cursor-pointer flex-col justify-between rounded-lg border bg-card p-3 hover:bg-card/60",style:{height:o?"".concat(eT.expand,"rem"):"".concat(eT.compress,"rem"),transition:"all 0.25s ease-out"},onClick:()=>window.open(a.link),children:(0,r.jsx)(ej,{source:a,showMore:o})})})}),(0,r.jsx)(q._v,{align:"start",className:"cursor-pointer p-2",onClick:e=>{e.stopPropagation(),d(s),c(!0)},children:(0,r.jsxs)("p",{children:["Score: ",null!==(n=null==a?void 0:null===(t=a.extra)||void 0===t?void 0:t.score)&&void 0!==n?n:"-"]})})]}),(0,r.jsx)(eo.bZ,{className:"w-96 bg-background text-sm text-foreground dark:border-muted-foreground/60",children:(0,r.jsx)(ef.Z,{relevantDocument:a})})]})}function ej(e){let{source:t,showMore:n}=e,{hostname:l}=new URL(t.link),s="MessageAttachmentIssueDoc"===t.__typename,a="MessageAttachmentPullDoc"===t.__typename,o="MessageAttachmentWebDoc"===t.__typename?void 0:t.author,i=(s||a)&&!!o;return(0,r.jsxs)("div",{className:"flex flex-1 flex-col justify-between gap-y-1",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-y-0.5",children:[(0,r.jsx)("p",{className:"line-clamp-1 w-full overflow-hidden text-ellipsis break-all text-xs font-semibold",children:t.title}),i&&(0,r.jsxs)("div",{className:"flex items-center gap-1 overflow-x-hidden",children:[(0,r.jsx)(ex.Yt,{user:o,className:"h-3.5 w-3.5 shrink-0"}),(0,r.jsx)("p",{className:"truncate text-xs font-medium text-muted-foreground",children:null==o?void 0:o.name})]}),(!i||n)&&(0,r.jsx)("p",{className:(0,L.cn)(" w-full overflow-hidden text-ellipsis break-all text-xs text-muted-foreground",!i&&n?"line-clamp-2":"line-clamp-1"),children:ew((0,L.L5)(t))})]}),(0,r.jsx)("div",{className:"flex items-center text-xs text-muted-foreground",children:(0,r.jsxs)("div",{className:"flex w-full flex-1 items-center justify-between gap-1",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(eh.V,{hostname:l}),(0,r.jsx)("p",{className:"ml-1 truncate",children:l.replace("www.","").split("/")[0]})]}),(0,r.jsxs)("div",{className:"flex shrink-0 items-center gap-1",children:[s&&(0,r.jsxs)(r.Fragment,{children:[t.closed?(0,r.jsx)(Z.IconCheckCircled,{className:"h-3.5 w-3.5"}):(0,r.jsx)(Z.IconCircleDot,{className:"h-3.5 w-3.5"}),(0,r.jsx)("span",{children:t.closed?"Closed":"Open"})]}),a&&(0,r.jsxs)(r.Fragment,{children:[t.merged?(0,r.jsx)(Z.IconGitMerge,{className:"h-3.5 w-3.5"}):(0,r.jsx)(Z.IconGitPullRequest,{className:"h-3.5 w-3.5"}),t.merged?"Merged":"Open"]})]})]})})]})}function eb(e){let{message:t,onCancel:n,onSubmit:s}=e,a=el.Ry({content:el.Z_().trim()}),o=(0,en.cI)({resolver:(0,$.F)(a),defaultValues:{content:t.content}}),{isSubmitting:i}=o.formState,[c]=(0,l.useState)(t),d=async e=>{let t=await s({...c,content:e.content});t&&(0,F.zG)(o)(t)};return(0,r.jsx)(ea.l0,{...o,children:(0,r.jsxs)("form",{onSubmit:o.handleSubmit(d),children:[(0,r.jsx)(ea.Wi,{control:o.control,name:"content",render:e=>{let{field:t}=e;return(0,r.jsxs)(ea.xJ,{children:[(0,r.jsx)(ea.NI,{children:(0,r.jsx)(er.Z,{autoFocus:!0,minRows:2,maxRows:20,className:"w-full rounded-lg border bg-background p-4 outline-ring",...t})}),(0,r.jsx)(ea.zG,{})]})}}),(0,r.jsxs)("div",{className:"my-4 flex items-center justify-between gap-2 px-2",children:[(0,r.jsx)("div",{children:(0,r.jsx)(ea.zG,{})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(U.z,{type:"button",variant:"outline",onClick:n,className:"min-w-[2rem]",children:"Cancel"}),(0,r.jsxs)(U.z,{type:"submit",disabled:i,children:[i&&(0,r.jsx)(Z.IconSpinner,{className:"mr-2 h-4 w-4 animate-spin"}),"Save"]})]})]})]})})}let ew=e=>{let t=B().sanitize(e,{ALLOWED_TAGS:[],ALLOWED_ATTR:[]}),n=et.TU.parse(t),r=X().decode(n),l=r.replace(/<\/?[^>]+(>|$)/g,"");return l};var eN=n(90379);let ey=(0,l.lazy)(()=>n.e(726).then(n.t.bind(n,80726,23))),eI=e=>{let{value:t,isFullScreen:n,onToggleFullScreen:s,onClose:a}=e,[o]=(0,j.m)(),{theme:i}=(0,y.X)(),c=(0,l.useRef)(null);return((0,l.useEffect)(()=>{if(t){var e;null===(e=c.current)||void 0===e||e.scrollTo({top:0,behavior:"smooth"})}},[t]),(null==o?void 0:o.value)&&open)?(0,r.jsxs)("div",{className:"flex h-full flex-col px-3 pt-2",children:[(0,r.jsx)("div",{className:"flex items-center justify-end pb-2",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(U.z,{variant:"ghost",size:"icon",onClick:e=>s(!n),children:(0,r.jsx)(Z.IconChevronDown,{className:(0,L.cn)("transition-all",n?"":"rotate-180")})}),(0,r.jsx)(U.z,{variant:"ghost",size:"icon",onClick:a,children:(0,r.jsx)(Z.IconClose,{})})]})}),(0,r.jsx)(l.Suspense,{fallback:(0,r.jsx)(eN.cg,{className:"p-2"}),children:t?(0,r.jsx)(V.ScrollArea,{className:"flex-1",ref:c,children:(0,r.jsx)(ey,{theme:"dark"===i?"tomorrow":"rjv-default",src:t,style:{fontSize:"0.75rem"},collapseStringsAfterLength:120})}):null})]}):null};var eC=n(73460),eS=n(68172),ek=n(61249),eR=n(63743),eA=n(7449);let eM=(0,b.BX)("\n  mutation DeleteThread($id: ID!) {\n    deleteThread(id: $id)\n  }\n");function eE(e){let{threadIdFromURL:t,streamingDone:n}=e,s=(0,o.useRouter)(),{isThreadOwner:a}=(0,l.useContext)(ev),[i,c]=(0,l.useState)(!1),[d,u]=(0,l.useState)(!1),m=(0,F.Db)(eM,{onCompleted(e){e.deleteThread?s.replace("/"):(v.A.error("Failed to delete"),u(!1))},onError(e){v.A.error((null==e?void 0:e.message)||"Failed to delete"),u(!1)}}),f=e=>{e&&(0,T.wh)(),s.push("/")};return(0,r.jsxs)("header",{className:"flex h-16 items-center justify-between px-4 lg:px-10",children:[(0,r.jsx)("div",{className:"flex items-center gap-x-6",children:(0,r.jsxs)(U.z,{variant:"ghost",className:"-ml-1 pl-0 text-sm text-muted-foreground",onClick:()=>f(),children:[(0,r.jsx)(Z.IconChevronLeft,{className:"mr-1 h-5 w-5"}),"Home"]})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[n&&t&&(0,r.jsx)(U.z,{variant:"ghost",className:"flex items-center gap-1 px-2 font-normal text-muted-foreground",onClick:()=>f(!0),children:(0,r.jsx)(Z.IconPlus,{})}),n&&t&&a&&(0,r.jsxs)(eC.aR,{open:i,onOpenChange:c,children:[(0,r.jsx)(eC.vW,{asChild:!0,children:(0,r.jsx)(U.z,{size:"icon",variant:"hover-destructive",children:(0,r.jsx)(Z.IconTrash,{})})}),(0,r.jsxs)(eC._T,{children:[(0,r.jsxs)(eC.fY,{children:[(0,r.jsx)(eC.f$,{children:"Delete this thread"}),(0,r.jsx)(eC.yT,{children:"Are you sure you want to delete this thread? This operation is not revertible."})]}),(0,r.jsxs)(eC.xo,{children:[(0,r.jsx)(eC.le,{children:"Cancel"}),(0,r.jsxs)(eC.OL,{className:(0,U.d)({variant:"destructive"}),onClick:e=>{e.preventDefault(),u(!0),m({id:t})},children:[d&&(0,r.jsx)(Z.IconSpinner,{className:"mr-2 h-4 w-4 animate-spin"}),"Yes, delete it"]})]})]})]}),(0,r.jsx)(eS.q,{children:(0,r.jsx)(eR.T,{})}),(0,r.jsx)(ek.L,{className:"mr-4"}),(0,r.jsx)(eA.Z,{showHome:!1,showSetting:!0,beforeRouteChange:()=>{(0,T.wh)()},children:(0,r.jsx)(ex.SQ,{className:"h-10 w-10 border"})})]})]})}function e_(){return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(ei.O,{className:"w-full"}),(0,r.jsx)(ei.O,{className:"w-[70%]"})]}),(0,r.jsx)(ei.O,{className:"h-40 w-full"})]})}function eD(e){let{message:t,className:n,...s}=e,{contextInfo:a,fetchingContextInfo:o}=(0,l.useContext)(ev),{supportsOnApplyInEditorV2:i}=(0,l.useContext)(ec.p);return(0,r.jsx)("div",{className:(0,L.cn)("font-semibold",n),...s,children:(0,r.jsx)(em.J,{message:t.content,contextInfo:a,supportsOnApplyInEditorV2:i,fetchingContextInfo:o,className:"text-xl prose-p:mb-2 prose-p:mt-0",headline:!0,canWrapLongLines:!0})})}let eT={compress:5.3,expand:6.3},eF="_temp_msg_",ez=()=>"".concat(eF).concat((0,x.x0)());function eL(){var e,t,n,s,a;let m=(0,D.a)(e=>e.pendingUserMessage),[{data:x}]=(0,S.P)(),{updateUrlComponents:b,pathname:K}=(0,A.Z)(),[$,Y]=(0,l.useState)(),[B,J]=(0,l.useState)(!1),X=(0,M.xG)(),[ee,et]=(0,l.useState)([]),[en,er]=(0,l.useState)(!0),[el,es]=(0,l.useState)(!!(null==m?void 0:m.content)),[ea,eo]=(0,l.useState)(""),[ei,ec]=(0,l.useState)(""),ed=(0,l.useRef)(null),[eu,em]=(0,l.useState)(!1),[ef]=(0,W.Hb)(),eh=(0,o.useRouter)(),ex=(0,l.useRef)(!1),{theme:eg}=(0,y.X)(),[ej,eb]=(0,l.useState)(!1),[ew,eN]=(0,l.useState)(),ey=(0,l.useRef)(null),[eC,eS]=(0,l.useState)(45),ek=(0,l.useRef)(eC),[eR]=(0,j.m)(),[eA,eM]=(0,l.useState)(),eT=(0,l.useMemo)(()=>{var e,t;if($)return null===(t=$.match(/^\/search\/(.*)/))||void 0===t?void 0:null===(e=t[1])||void 0===e?void 0:e.split("-").pop()},[$]),eL=(0,F.Db)(eU),eV=async e=>{let t=ee.findIndex(t=>t.id===e.id);if(!(t>-1)||!eA)return Error("Failed to save");{var n;let r=await eL({input:{threadId:eA,id:e.id,content:e.content}});if(null==r||null===(n=r.data)||void 0===n||!n.updateThreadMessage)return(null==r?void 0:r.error)||Error("Failed to save");await et(n=>{let r=[...n];return r[t]=e,r})}};(0,l.useEffect)(()=>{eT&&eM(eT)},[eT]);let[{data:eO,fetching:eq}]=(0,p.aM)({query:z.Gx}),[eG,eW]=(0,l.useState)(),[{data:eQ,fetching:eK,error:eH}]=(0,p.aM)({query:z.XL,variables:{ids:[eA]},pause:!eA}),[{data:e$,error:eY,fetching:eB,stale:eJ}]=(0,p.aM)({query:z.r4,variables:{threadId:eA,first:30,after:eG},pause:!eA||el});(0,l.useEffect)(()=>{var e,t,n,r;if(!eJ){if(null==e$?void 0:null===(t=e$.threadMessages)||void 0===t?void 0:null===(e=t.edges)||void 0===e?void 0:e.length){let e=e$.threadMessages.edges.map(e=>e.node).slice();et(t=>{var n;return(n=[...t,...e]).length?(0,h.Z)(n,(0,f.Z)("id",2)):[]})}if(null==e$?void 0:e$.threadMessages){let e=null==e$?void 0:null===(r=e$.threadMessages)||void 0===r?void 0:null===(n=r.pageInfo)||void 0===n?void 0:n.hasNextPage,t=null==e$?void 0:e$.threadMessages.pageInfo.endCursor;e&&t?eW(t):es(!0)}}},[e$]);let eX=(0,l.useMemo)(()=>{if(!x)return!1;if(!eT)return!0;let e=null==eQ?void 0:eQ.threads.edges[0];return!!e&&x.me.id===e.node.userId},[x,eQ,eT]),e0=null==eO?void 0:eO.contextInfo.sources,e1=null==ee?void 0:null===(e=ee[0])||void 0===e?void 0:e.content,e5=(0,l.useMemo)(()=>e0&&e1?(0,L.i8)(e0,e1,{maxLength:g.$I}):"",[e0,e1]);(0,l.useEffect)(()=>{e5&&(document.title=e5)},[e5]),(0,l.useEffect)(()=>{eY&&!el&&es(!0)},[eY]);let{sendUserMessage:e4,isLoading:e2,error:e6,answer:e3,stop:e7,regenerate:e8,deleteThreadMessagePair:e9}=(0,E.x)({threadId:eA}),te=(0,C.d)(e2),{selectedModel:tt,isFetchingModels:tn,models:tr}=(0,k.Vq)(),{selectedRepository:tl,isFetchingRepositories:ts,repos:ta}=(0,R.Q)(),to=(0,l.useMemo)(()=>ee.find(e=>e.id===ew),[ew,ee]),ti=(0,l.useMemo)(()=>to?(0,d.Z)(null==to?void 0:to.attachment,"doc","code"):{answers:ee.filter(e=>e.role===w.uU.Assistant).map(e=>(0,d.Z)(e,"doc","code"))},[ew,null==to?void 0:null===(t=to.attachment)||void 0===t?void 0:t.code,null==to?void 0:null===(n=to.attachment)||void 0===n?void 0:n.doc]);(0,l.useEffect)(()=>{Y(K),B||J(!0)},[K]),(0,l.useEffect)(()=>{B&&!eT&&(()=>{if(!ex.current){if(ex.current=!0,null==m?void 0:m.content){tf(m.content,m.context),(0,_.UP)(void 0);return}eA||((0,T.wh)(),eh.replace("/"))}})()},[B]),(0,l.useEffect)(()=>{el&&setTimeout(()=>{em(!0)},300)},[el]);let tc=(0,l.useMemo)(()=>!eT&&(0,u.Z)(ee,e=>!!e.error),[eT,ee]),{isCopied:td,onShare:tu}=function(e){let{threadIdFromURL:t,threadIdFromStreaming:n,streamingDone:r,updateThreadURL:l}=e,{isCopied:s,copyToClipboard:a}=(0,N.m)({timeout:2e3}),o=(0,F.Db)(z.md,{onError(e){v.A.error(e.message)}}),i=!t&&r&&n&&l,c=async()=>{if(s)return;let e=window.location.href;i&&(await o({threadId:n}),e=l(n)),a(e)};return{onShare:c,isCopied:s}}({threadIdFromURL:eT,threadIdFromStreaming:eA,streamingDone:!e2,updateThreadURL:e=>{let t=(0,i.Z)(e5),n=(0,c.Z)([t,e]).join("-"),r=b({pathname:"/search/".concat(n),searchParams:{del:["q"]},replace:!0});return location.origin+r}});(0,l.useEffect)(()=>{var e,t,n,r;e3.threadId&&e3.threadId!==eA&&eM(e3.threadId);let l=[...ee],s=l.findIndex(e=>e.id===ea),a=l.findIndex(e=>e.id===ei);if(-1===s||-1===a)return;let o=l[s],i=l[a];i.content=e3.content,(null===(e=i.attachment)||void 0===e?void 0:e.code)||!e3.attachmentsCode||(i.attachment={clientCode:null,doc:(null===(n=i.attachment)||void 0===n?void 0:n.doc)||null,code:e3.attachmentsCode.map(e=>({...e.code,extra:{scores:e.scores}}))||null}),(null===(t=i.attachment)||void 0===t?void 0:t.doc)||!e3.attachmentsDoc||(i.attachment={clientCode:null,doc:e3.attachmentsDoc.map(e=>({...e.doc,extra:{score:e.score}}))||null,code:(null===(r=i.attachment)||void 0===r?void 0:r.code)||null}),i.threadRelevantQuestions=null==e3?void 0:e3.relevantQuestions;let c=e3.userMessageId,d=e3.assistantMessageId;c&&d&&c!==o.id&&d!==i.id&&(o.id=c,i.id=d,eo(c),ec(d)),et(l)},[e2,e3]),(0,l.useEffect)(()=>{if(e6){let e=[...ee],t=e.find(e=>e.id===ei);t&&(t.error=e6?"401"===e6.message?"Unauthorized":(0,u.Z)(e6.graphQLErrors,e=>{var t;return(null===(t=e.extensions)||void 0===t?void 0:t.code)===g.ir})?"The thread has expired or does not exist.":e6.message||"Failed to fetch":"Failed to fetch")}},[e6]);let tm=(0,l.useRef)();(0,l.useEffect)(()=>(te.current&&(tm.current=window.setTimeout(()=>{if(!te.current)return;er(!0);let e=null==ed?void 0:ed.current;e&&e.scrollTo({top:e.scrollHeight,behavior:"smooth"})},300)),te.current||er(!1),()=>{window.clearTimeout(tm.current)}),[e2]),(0,l.useEffect)(()=>{var e,t,n;ej?(null===(e=ey.current)||void 0===e||e.expand(),null===(t=ey.current)||void 0===t||t.resize(eC)):null===(n=ey.current)||void 0===n||n.collapse()},[ej]);let tf=(e,t)=>{let n=ez(),r=ez(),l={id:n,role:w.uU.User,content:e},s={id:r,role:w.uU.Assistant,content:""},{sourceIdForCodeQuery:a,sourceIdsForDocQuery:o,searchPublic:i}=eP(null==tl?void 0:tl.sourceId,t),c=a?{sourceId:a,content:e}:null;eo(n),ec(r),et([...ee].concat([l,s])),e4({content:e},{generateRelevantQuestions:!0,codeQuery:c,docQuery:{sourceIds:o,content:e,searchPublic:!!i},modelName:null==t?void 0:t.modelName})},th=(0,l.useMemo)(()=>{var e,t;if(el&&!eK&&eT&&(eH||!(null==eQ?void 0:null===(t=eQ.threads)||void 0===t?void 0:null===(e=t.edges)||void 0===e?void 0:e.length)))return eH||Error(g.ir)},[eQ,eK,eH,el,eT]),[tx]=(0,I.n)(eB||(null==e$?void 0:null===(a=e$.threadMessages)||void 0===a?void 0:null===(s=a.pageInfo)||void 0===s?void 0:s.hasNextPage),200),tv=(0,l.useMemo)(()=>{let e=[],t={question:null,answer:null};return ee.forEach(n=>{n.role===w.uU.User?t.question=n:n.role!==w.uU.Assistant||t.answer||(t.answer=n,e.push(t),t={question:null,answer:null})}),e},[ee]),tp=ef?{height:"calc(100vh - ".concat(W.wt,")")}:{height:"100vh"};return X?el&&(th||eY)?(0,r.jsx)(eZ,{error:th||eY,threadIdFromURL:eT}):(0,r.jsx)(ev.Provider,{value:{isLoading:e2,onRegenerateResponse:()=>{var e;if(!eA||eq)return;let t=ee.length-1,n=t-1;if(-1===t||n<=-1)return;let r=ee[n].id,l=ee[t].id,s=ee.slice(0,-2),a=ee[n],o={...a,id:ez()},i={id:ez(),role:w.uU.Assistant,content:"",attachment:{code:null,doc:null,clientCode:null},error:void 0},c=(0,L.b)(o.content,null==eO?void 0:null===(e=eO.contextInfo)||void 0===e?void 0:e.sources),{sourceIdForCodeQuery:d,sourceIdsForDocQuery:u,searchPublic:m}=eP(null==tl?void 0:tl.sourceId,(0,L.G8)(c)),f=d?{sourceId:d,content:o.content}:null,h={sourceIds:u,content:o.content,searchPublic:m};eo(o.id),ec(i.id),et([...s,o,i]),e8({threadId:eA,userMessageId:r,assistantMessageId:l,userMessage:{content:o.content},threadRunOptions:{generateRelevantQuestions:!0,codeQuery:f,docQuery:h,modelName:tt}})},onSubmitSearch:tf,setDevPanelOpen:eb,setConversationIdForDev:eN,isPathnameInitialized:B,enableDeveloperMode:eR.value,contextInfo:null==eO?void 0:eO.contextInfo,fetchingContextInfo:eq,onDeleteMessage:e=>{if(!eA)return;let t=ee.findIndex(t=>t.id===e),n=t-1,r=ee[t-1];if(-1!==t&&(null==r?void 0:r.role)===w.uU.User){if(r.id.startsWith(eF)&&e.startsWith(eF)){let e=ee.slice(0,n).concat(ee.slice(t+1));et(e);return}e9(eA,r.id,e).then(e=>{if(e){v.A.error(e);return}let r=ee.slice(0,n).concat(ee.slice(t+1));et(r)})}},isThreadOwner:eX,onUpdateMessage:eV,repositories:ta},children:(0,r.jsx)("div",{className:"transition-all",style:tp,children:(0,r.jsxs)(P.pO,{direction:"vertical",onLayout:e=>{(null==e?void 0:e[1])&&eS(e[1])},children:[(0,r.jsxs)(P.ee,{children:[(0,r.jsx)(eE,{threadIdFromURL:eT,streamingDone:!e2}),(0,r.jsx)(Q.Z,{loading:!el,fallback:(0,r.jsxs)("div",{className:"mx-auto mt-24 w-full space-y-10 px-4 pb-32 lg:max-w-4xl lg:px-0",children:[(0,r.jsx)(e_,{}),(0,r.jsx)(e_,{})]}),children:(0,r.jsxs)("main",{className:"h-[calc(100%-4rem)] pb-8 lg:pb-0",children:[(0,r.jsx)(V.ScrollArea,{className:"h-full",ref:ed,children:(0,r.jsx)("div",{className:"mx-auto px-4 pb-32 lg:max-w-4xl lg:px-0",children:(0,r.jsx)("div",{className:"flex flex-col",children:tv.map((e,t)=>{var n,s;let a=t===tv.length-1;return e.question?(0,r.jsxs)(l.Fragment,{children:[!!e.question&&(0,r.jsx)(eD,{className:"pb-2 pt-8",message:e.question},e.question.id),!!e.answer&&(0,r.jsx)(ep,{className:"pb-8 pt-2",message:e.answer,clientCode:null===(s=e.question)||void 0===s?void 0:null===(n=s.attachment)||void 0===n?void 0:n.clientCode,isLoading:e2&&a,isLastAssistantMessage:a,showRelatedQuestion:a,isDeletable:!e2&&ee.length>2},e.answer.id),!a&&(0,r.jsx)(O.Z,{})]},e.question.id):null})})})}),(0,r.jsx)(G.K,{className:(0,L.cn)("!fixed !bottom-[5.4rem] !right-4 !top-auto z-40 border-muted-foreground lg:!bottom-[2.85rem]",{hidden:ej}),container:ed.current,offset:100,style:"dark"===eg?{"--background":"0 0% 12%"}:{}}),(0,r.jsxs)("div",{className:(0,L.cn)("fixed bottom-5 left-0 z-30 flex min-h-[3rem] w-full flex-col items-center gap-y-2",{"opacity-100 translate-y-0":eu,"opacity-0 translate-y-10":!eu,hidden:ej}),style:Object.assign({transition:"all 0.35s ease-out"},"dark"===eg?{"--background":"0 0% 12%"}:{}),children:[(0,r.jsxs)("div",{className:(0,L.cn)("absolute flex items-center gap-4"),style:eX?{top:"-2.5rem"}:void 0,children:[en&&(0,r.jsxs)(U.z,{className:"bg-background",variant:"outline",onClick:()=>e7(),children:[(0,r.jsx)(Z.IconStop,{className:"mr-2"}),"Stop generating"]}),!en&&(0,r.jsxs)(q.u,{delayDuration:0,children:[(0,r.jsx)(q.aJ,{asChild:!0,children:(0,r.jsx)("span",{tabIndex:0,children:(0,r.jsxs)(U.z,{className:"gap-2 bg-background",variant:"outline",onClick:tu,disabled:tc,children:[tc?(0,r.jsx)(Z.IconInfoCircled,{}):td?(0,r.jsx)(Z.IconCheck,{className:"text-green-600"}):(0,r.jsx)(Z.IconShare,{}),"Share Link"]})})}),(0,r.jsx)(q._v,{hidden:!tc,children:"Please resolve errors in messages before sharing this thread."})]})]}),eX&&(0,r.jsx)("div",{className:(0,L.cn)("relative z-20 flex justify-center self-stretch px-4"),children:(0,r.jsx)(H.Z,{onSearch:tf,className:"min-h-[5rem] lg:max-w-4xl",placeholder:"Ask a follow up question",isFollowup:!0,isLoading:e2,contextInfo:null==eO?void 0:eO.contextInfo,fetchingContextInfo:eq,modelName:tt,onSelectModel:e=>{(0,_.Eg)(e)},repoSourceId:null==tl?void 0:tl.sourceId,onSelectRepo:e=>{(0,_.xt)(e)},isInitializingResources:tn||ts,models:tr})})]})]})})]}),(0,r.jsx)(P.Dp,{className:(0,L.cn)("hidden !h-[4px] border-none bg-background shadow-[0px_-4px_4px_rgba(0,0,0,0.2)] hover:bg-blue-500 active:bg-blue-500 dark:shadow-[0px_-4px_4px_rgba(255,255,255,0.2)]",ej&&"block")}),(0,r.jsx)(P.ee,{collapsible:!0,collapsedSize:0,defaultSize:0,ref:ey,onCollapse:()=>eb(!1),className:"z-50",children:(0,r.jsx)(eI,{onClose:()=>eb(!1),value:ti,isFullScreen:100===eC,onToggleFullScreen:e=>{var t;let n=ek.current;e?n=100:100===n&&(n=45),null===(t=ey.current)||void 0===t||t.resize(n),eS(n),ek.current=eC}})})]})})}):null}let eU=(0,b.BX)("\n  mutation UpdateThreadMessage($input: UpdateMessageInput!) {\n    updateThreadMessage(input: $input)\n  }\n");function eZ(e){let{error:t,threadIdFromURL:n}=e;return t.message===g.ir?(0,r.jsx)(K.default,{}):(0,r.jsxs)("div",{className:"flex h-screen flex-col",children:[(0,r.jsx)(eE,{threadIdFromURL:n}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"flex h-full flex-col items-center justify-center gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(Z.IconFileSearch,{className:"h-6 w-6"}),(0,r.jsx)("div",{className:"text-xl font-semibold",children:"Something went wrong"})]}),(0,r.jsx)("div",{children:"Failed to fetch the thread, please refresh the page or start a new thread"}),(0,r.jsxs)(a(),{href:"/",onClick:T.wh,className:(0,L.cn)((0,U.d)(),"mt-4 gap-2"),children:[(0,r.jsx)(Z.IconPlus,{}),(0,r.jsx)("span",{children:"New Thread"})]})]})})]})}function eP(e,t){let n,r=[],l=!1;if(t){var s,a,o;r=(0,m.Z)((0,c.Z)([e,null==t?void 0:null===(s=t.codeSourceIds)||void 0===s?void 0:s[0]].concat(t.docSourceIds))),l=null!==(o=t.searchPublic)&&void 0!==o&&o,n=e||(null===(a=t.codeSourceIds)||void 0===a?void 0:a[0])||void 0}return{sourceIdsForDocQuery:r,sourceIdForCodeQuery:n,searchPublic:l}}},69579:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var r=n(36164),l=n(42891),s=n.n(l),a=n(70652),o=n.n(a),i=n(83332),c=n(76531),d=n(57288),u=n(68172),m=n(30601),f=n(63743),h=n(31458),x=n(52569),v=n(7449);function p(){let[e]=(0,m.Hb)(),t=e?{height:"calc(100vh - ".concat(m.wt,")")}:{height:"100vh"};return(0,r.jsxs)("div",{style:t,className:"flex flex-col",children:[(0,r.jsx)(g,{}),(0,r.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-center",children:[(0,r.jsx)("h2",{className:"mt-4 text-6xl font-bold tracking-tight text-foreground sm:text-7xl",children:"404"}),(0,r.jsx)("p",{className:"mt-4 text-lg text-muted-foreground",children:"Oops, it looks like the page you're looking for doesn't exist."}),(0,r.jsx)(o(),{className:(0,d.cn)("mt-6",(0,h.d)()),href:"/",children:"Home"})]})]})}function g(){return(0,r.jsxs)("header",{className:"flex h-16 items-center justify-between border-b px-4 lg:px-10",children:[(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsxs)(o(),{href:"/",children:[(0,r.jsx)(s(),{src:c.Z,alt:"logo",width:128,className:"dark:hidden"}),(0,r.jsx)(s(),{src:i.Z,alt:"logo",width:96,className:"hidden dark:block"})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[(0,r.jsx)(u.q,{children:(0,r.jsx)(f.T,{})}),(0,r.jsx)(v.Z,{showSetting:!0,children:(0,r.jsx)(x.SQ,{className:"h-10 w-10 border"})})]})]})}},73460:function(e,t,n){"use strict";n.d(t,{OL:function(){return p},_T:function(){return m},aR:function(){return i},f$:function(){return x},fY:function(){return f},le:function(){return g},vW:function(){return c},xo:function(){return h},yT:function(){return v}});var r=n(36164),l=n(3546),s=n(28961),a=n(57288),o=n(31458);let i=s.fC,c=s.xz,d=e=>{let{className:t,children:n,...l}=e;return(0,r.jsx)(s.h_,{className:(0,a.cn)(t),...l,children:(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-end justify-center sm:items-center",children:n})})};d.displayName=s.h_.displayName;let u=l.forwardRef((e,t)=>{let{className:n,children:l,...o}=e;return(0,r.jsx)(s.aV,{className:(0,a.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm transition-opacity animate-in fade-in",n),...o,ref:t})});u.displayName=s.aV.displayName;let m=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(u,{}),(0,r.jsx)(s.VY,{ref:t,className:(0,a.cn)("fixed z-50 grid w-full max-w-lg scale-100 gap-4 border bg-background p-6 opacity-100 shadow-lg animate-in fade-in-90 slide-in-from-bottom-10 sm:rounded-lg sm:zoom-in-90 sm:slide-in-from-bottom-0 md:w-full",n),...l})]})});m.displayName=s.VY.displayName;let f=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,a.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...n})};f.displayName="AlertDialogHeader";let h=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,a.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};h.displayName="AlertDialogFooter";let x=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(s.Dx,{ref:t,className:(0,a.cn)("text-lg font-semibold",n),...l})});x.displayName=s.Dx.displayName;let v=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(s.dk,{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",n),...l})});v.displayName=s.dk.displayName;let p=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(s.aU,{ref:t,className:(0,a.cn)((0,o.d)(),n),...l})});p.displayName=s.aU.displayName;let g=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(s.$j,{ref:t,className:(0,a.cn)((0,o.d)({variant:"outline"}),"mt-2 sm:mt-0",n),...l})});g.displayName=s.$j.displayName},98150:function(e,t,n){"use strict";n.d(t,{NI:function(){return v},Wi:function(){return u},l0:function(){return c},lX:function(){return x},pf:function(){return p},xJ:function(){return h},zG:function(){return g}});var r=n(36164),l=n(3546),s=n(74047),a=n(5493),o=n(57288),i=n(5266);let c=a.RV,d=l.createContext({}),u=e=>{let{...t}=e;return(0,r.jsx)(d.Provider,{value:{name:t.name},children:(0,r.jsx)(a.Qr,{...t})})},m=()=>{let e=l.useContext(d),t=l.useContext(f),{getFieldState:n,formState:r}=(0,a.Gc)(),s=e.name||"root",o=n(s,r);if(!r)throw Error("useFormField should be used within <Form>");let{id:i}=t;return{id:i,name:s,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...o}},f=l.createContext({}),h=l.forwardRef((e,t)=>{let{className:n,...s}=e,a=l.useId();return(0,r.jsx)(f.Provider,{value:{id:a},children:(0,r.jsx)("div",{ref:t,className:(0,o.cn)("space-y-2",n),...s})})});h.displayName="FormItem";let x=l.forwardRef((e,t)=>{let{className:n,required:l,...s}=e,{error:a,formItemId:c}=m();return(0,r.jsx)(i._,{ref:t,className:(0,o.cn)(a&&"text-destructive",l&&'after:ml-0.5 after:text-destructive after:content-["*"]',n),htmlFor:c,...s})});x.displayName="FormLabel";let v=l.forwardRef((e,t)=>{let{...n}=e,{error:l,formItemId:a,formDescriptionId:o,formMessageId:i}=m();return(0,r.jsx)(s.g7,{ref:t,id:a,"aria-describedby":l?"".concat(o," ").concat(i):"".concat(o),"aria-invalid":!!l,...n})});v.displayName="FormControl";let p=l.forwardRef((e,t)=>{let{className:n,...l}=e,{formDescriptionId:s}=m();return(0,r.jsx)("div",{ref:t,id:s,className:(0,o.cn)("text-sm text-muted-foreground",n),...l})});p.displayName="FormDescription";let g=l.forwardRef((e,t)=>{let{className:n,children:l,...s}=e,{error:a,formMessageId:i}=m(),c=a?String(null==a?void 0:a.message):l;return c?(0,r.jsx)("p",{ref:t,id:i,className:(0,o.cn)("text-sm font-medium text-destructive",n),...s,children:c}):null});g.displayName="FormMessage"},53538:function(e,t,n){"use strict";n.d(t,{Dp:function(){return i},ee:function(){return o},pO:function(){return a}});var r=n(36164),l=n(6618),s=n(57288);let a=e=>{let{className:t,...n}=e;return(0,r.jsx)(l.eh,{className:(0,s.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...n})},o=l.s_,i=e=>{let{withHandle:t,className:n,...a}=e;return(0,r.jsx)(l.OT,{className:(0,s.cn)("border-bg relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",n),...a,children:t&&(0,r.jsx)("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border"})})}},93877:function(e,t,n){"use strict";n.d(t,{m:function(){return o}});var r=n(3546);let l=(e,t)=>{let[n,l]=(0,r.useState)(t),[s,a]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let t=localStorage.getItem(e);t&&l(JSON.parse(t)),a(!1)},[]),[n,t=>{l(t),localStorage.setItem(e,JSON.stringify(t))},s]};class s{get value(){if("undefined"!=typeof localStorage){let e=localStorage.getItem(this.storageKey);if(e)return"true"===e}return this.defaultValue}constructor(e,t,n,r){this.storageKey=e,this.title=t,this.description=n,this.defaultValue=r}}let a=new class{defineGlobalVar(){return new s(this.storageKey,this.title,this.description,this.defaultValue)}defineHook(){return()=>{let[e,t,n]=l(this.storageKey,this.defaultValue);return[{value:e,title:this.title,description:this.description,loading:n},()=>{t(!e)}]}}constructor(e,t,n,r){this.storageKey="EXP_".concat(e),this.title=t,this.description=n,this.defaultValue=null!=r&&r}}("enable_developer_mode","Developer Mode","Enable the developer mode. The features involved include the Answer Engine.",!1);a.defineGlobalVar();let o=a.defineHook()},44645:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(3546),l=n(11978);function s(){let e=(0,l.usePathname)(),t=(0,l.useRouter)(),n=(0,l.useSearchParams)(),s=(0,r.useCallback)(e=>{let t=new URLSearchParams(n);e&&Object.entries(e).forEach(e=>{let[n,r]=e;return t.set(n,r)});let r=t.toString();return r.length>0?"?".concat(r):""},[n]),a=(0,r.useCallback)(r=>{let l=function(e,t,n){var r,l;let s=null===(r=n.searchParams)||void 0===r?void 0:r.set,a=null===(l=n.searchParams)||void 0===l?void 0:l.del,o=new URLSearchParams(t);s&&Object.entries(s).forEach(e=>{let[t,n]=e;return o.set(t,n)}),a&&(Array.isArray(a)?a.forEach(e=>o.delete(e)):o.delete(a));let i=o.toString(),c=e;return i.length>0&&(c+="?".concat(i)),n.hash&&(c+="#".concat(n.hash.replace(/^#/,""))),c}((null==r?void 0:r.pathname)||e,n,r);return r.replace?t.replace(l):t.push(l),l},[e,n]);return{pathname:e,router:t,searchParams:n,getQueryString:s,updateUrlComponents:a}}},76531:function(e,t){"use strict";t.Z={src:"/_next/static/media/logo.526f7cf9.png",height:184,width:607,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAASklEQVR4nGPsKQh1f/HshV/PqtNtagrC8p++//rDAgQM//9/ZWJifMZYnRqg9+bVq6iZ51+1SP/5ovH//z8eRgbGbwyMjPxA9n0AMi8g2L1xUkUAAAAASUVORK5CYII=",blurWidth:8,blurHeight:2}},1333:function(e,t,n){"use strict";n.d(t,{Pc:function(){return w},ck:function(){return M},fC:function(){return A}});var r=n(65122),l=n(3546),s=n(65727),a=n(85656),o=n(79869),i=n(47091),c=n(29434),d=n(72205),u=n(17957),m=n(27250),f=n(57541);let h="rovingFocusGroup.onEntryFocus",x={bubbles:!1,cancelable:!0},v="RovingFocusGroup",[p,g,j]=(0,a.B)(v),[b,w]=(0,i.b)(v,[j]),[N,y]=b(v),I=(0,l.forwardRef)((e,t)=>(0,l.createElement)(p.Provider,{scope:e.__scopeRovingFocusGroup},(0,l.createElement)(p.Slot,{scope:e.__scopeRovingFocusGroup},(0,l.createElement)(C,(0,r.Z)({},e,{ref:t}))))),C=(0,l.forwardRef)((e,t)=>{let{__scopeRovingFocusGroup:n,orientation:a,loop:i=!1,dir:c,currentTabStopId:v,defaultCurrentTabStopId:p,onCurrentTabStopIdChange:j,onEntryFocus:b,...w}=e,y=(0,l.useRef)(null),I=(0,o.e)(t,y),C=(0,f.gm)(c),[S=null,k]=(0,m.T)({prop:v,defaultProp:p,onChange:j}),[A,M]=(0,l.useState)(!1),E=(0,u.W)(b),_=g(n),D=(0,l.useRef)(!1),[T,F]=(0,l.useState)(0);return(0,l.useEffect)(()=>{let e=y.current;if(e)return e.addEventListener(h,E),()=>e.removeEventListener(h,E)},[E]),(0,l.createElement)(N,{scope:n,orientation:a,dir:C,loop:i,currentTabStopId:S,onItemFocus:(0,l.useCallback)(e=>k(e),[k]),onItemShiftTab:(0,l.useCallback)(()=>M(!0),[]),onFocusableItemAdd:(0,l.useCallback)(()=>F(e=>e+1),[]),onFocusableItemRemove:(0,l.useCallback)(()=>F(e=>e-1),[])},(0,l.createElement)(d.WV.div,(0,r.Z)({tabIndex:A||0===T?-1:0,"data-orientation":a},w,{ref:I,style:{outline:"none",...e.style},onMouseDown:(0,s.M)(e.onMouseDown,()=>{D.current=!0}),onFocus:(0,s.M)(e.onFocus,e=>{let t=!D.current;if(e.target===e.currentTarget&&t&&!A){let t=new CustomEvent(h,x);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=_().filter(e=>e.focusable),t=e.find(e=>e.active),n=e.find(e=>e.id===S),r=[t,n,...e].filter(Boolean),l=r.map(e=>e.ref.current);R(l)}}D.current=!1}),onBlur:(0,s.M)(e.onBlur,()=>M(!1))})))}),S=(0,l.forwardRef)((e,t)=>{let{__scopeRovingFocusGroup:n,focusable:a=!0,active:o=!1,tabStopId:i,...u}=e,m=(0,c.M)(),f=i||m,h=y("RovingFocusGroupItem",n),x=h.currentTabStopId===f,v=g(n),{onFocusableItemAdd:j,onFocusableItemRemove:b}=h;return(0,l.useEffect)(()=>{if(a)return j(),()=>b()},[a,j,b]),(0,l.createElement)(p.ItemSlot,{scope:n,id:f,focusable:a,active:o},(0,l.createElement)(d.WV.span,(0,r.Z)({tabIndex:x?0:-1,"data-orientation":h.orientation},u,{ref:t,onMouseDown:(0,s.M)(e.onMouseDown,e=>{a?h.onItemFocus(f):e.preventDefault()}),onFocus:(0,s.M)(e.onFocus,()=>h.onItemFocus(f)),onKeyDown:(0,s.M)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey){h.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let t=function(e,t,n){var r;let l=(r=e.key,"rtl"!==n?r:"ArrowLeft"===r?"ArrowRight":"ArrowRight"===r?"ArrowLeft":r);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(l))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(l)))return k[l]}(e,h.orientation,h.dir);if(void 0!==t){e.preventDefault();let l=v().filter(e=>e.focusable),s=l.map(e=>e.ref.current);if("last"===t)s.reverse();else if("prev"===t||"next"===t){var n,r;"prev"===t&&s.reverse();let l=s.indexOf(e.currentTarget);s=h.loop?(n=s,r=l+1,n.map((e,t)=>n[(r+t)%n.length])):s.slice(l+1)}setTimeout(()=>R(s))}})})))}),k={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function R(e){let t=document.activeElement;for(let n of e)if(n===t||(n.focus(),document.activeElement!==t))return}let A=I,M=S},6044:function(e,t,n){"use strict";n.d(t,{VY:function(){return R},aV:function(){return S},fC:function(){return C},nU:function(){return N},xz:function(){return k}});var r=n(65122),l=n(3546),s=n(65727),a=n(47091),o=n(1333),i=n(96497),c=n(72205),d=n(57541),u=n(27250),m=n(29434);let f="Tabs",[h,x]=(0,a.b)(f,[o.Pc]),v=(0,o.Pc)(),[p,g]=h(f),j=(0,l.forwardRef)((e,t)=>{let{__scopeTabs:n,value:s,onValueChange:a,defaultValue:o,orientation:i="horizontal",dir:f,activationMode:h="automatic",...x}=e,v=(0,d.gm)(f),[g,j]=(0,u.T)({prop:s,onChange:a,defaultProp:o});return(0,l.createElement)(p,{scope:n,baseId:(0,m.M)(),value:g,onValueChange:j,orientation:i,dir:v,activationMode:h},(0,l.createElement)(c.WV.div,(0,r.Z)({dir:v,"data-orientation":i},x,{ref:t})))}),b=(0,l.forwardRef)((e,t)=>{let{__scopeTabs:n,loop:s=!0,...a}=e,i=g("TabsList",n),d=v(n);return(0,l.createElement)(o.fC,(0,r.Z)({asChild:!0},d,{orientation:i.orientation,dir:i.dir,loop:s}),(0,l.createElement)(c.WV.div,(0,r.Z)({role:"tablist","aria-orientation":i.orientation},a,{ref:t})))}),w=(0,l.forwardRef)((e,t)=>{let{__scopeTabs:n,value:a,disabled:i=!1,...d}=e,u=g("TabsTrigger",n),m=v(n),f=y(u.baseId,a),h=I(u.baseId,a),x=a===u.value;return(0,l.createElement)(o.ck,(0,r.Z)({asChild:!0},m,{focusable:!i,active:x}),(0,l.createElement)(c.WV.button,(0,r.Z)({type:"button",role:"tab","aria-selected":x,"aria-controls":h,"data-state":x?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:f},d,{ref:t,onMouseDown:(0,s.M)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():u.onValueChange(a)}),onKeyDown:(0,s.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&u.onValueChange(a)}),onFocus:(0,s.M)(e.onFocus,()=>{let e="manual"!==u.activationMode;x||i||!e||u.onValueChange(a)})})))}),N=(0,l.forwardRef)((e,t)=>{let{__scopeTabs:n,value:s,forceMount:a,children:o,...d}=e,u=g("TabsContent",n),m=y(u.baseId,s),f=I(u.baseId,s),h=s===u.value,x=(0,l.useRef)(h);return(0,l.useEffect)(()=>{let e=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,l.createElement)(i.z,{present:a||h},({present:n})=>(0,l.createElement)(c.WV.div,(0,r.Z)({"data-state":h?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":m,hidden:!n,id:f,tabIndex:0},d,{ref:t,style:{...e.style,animationDuration:x.current?"0s":void 0}}),n&&o))});function y(e,t){return`${e}-trigger-${t}`}function I(e,t){return`${e}-content-${t}`}let C=j,S=b,k=w,R=N},82030:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(94219),l=n(79204),s=(0,n(43285).Z)(function(e,t){return null==e?{}:(0,r.Z)(e,t,function(t,n){return(0,l.Z)(e,n)})})}},function(e){e.O(0,[8415,7565,3078,753,7430,55,7812,4007,340,2546,1283,3449,2578,8511,240,2287,4421,7070,1454,1002,8961,6805,4546,4553,9275,9148,4405,578,1266,440,9427,6265,5019,7288,1565,4656,8103,9634,3236,2685,3375,5289,1744],function(){return e(e.s=72845)}),_N_E=e.O()}]);